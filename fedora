#!/usr/bin/env bash
cd "$(dirname "${0}")"
#   
#    /$$$$$$$$              /$$                                 
#   | $$_____/             | $$                             
#   | $$     /$$$$$$   /$$$$$$$  /$$$$$$   /$$$$$$  /$$$$$$ 
#   | $$$$$ /$$__  $$ /$$__  $$ /$$__  $$ /$$__  $$|____  $$
#   | $$__/| $$$$$$$$| $$  | $$| $$  \ $$| $$  \__/ /$$$$$$$
#   | $$   | $$_____/| $$  | $$| $$  | $$| $$      /$$__  $$
#   | $$   |  $$$$$$$|  $$$$$$$|  $$$$$$/| $$     |  $$$$$$$
#   |__/    \_______/ \_______/ \______/ |__/      \_______/
#                                                           

ask(){
  echo "1 : Silverblue - Initialize (rpm-ostree)"
  echo "2 : Silverblue - User Space Install and Config"
	echo "3 : Fedora     - Initialize (dnf)"
	echo "4 : Fedora     - User Space Install and Config"
	echo -n "> "
	read selection
	case $selection in

    1 )
      sudo rpm-ostree upgrade
      sudo rpm-ostree install gnome-shell-extension-pop-shell
      systemctl restart
      ;;

    2)
      source ./shared/flathub
      source ./shared/sshkeys
      source ./shared/gitclones
      source ./shared/gnome

      toolbox create
      toolbox run sh -exec '
        source ./shared/fedora-dnf-config
        source ./shared/fedora-user-space-installs
      '        

      source ./shared/gnome-extensions
      ;;

		3 )
      source fedora-dnf-config
      systemctl restart
		  ;;

		4)
    	sudo dnf -y install gnome-shell-extension-pop-shell xprop
      source ./shared/flathub
      source ./shared/fedora-user-space-installs

      source ./shared/sshkey
      source ./shared/gitclones
      source ./shared/gnome
      source ./shared/gnome-extensions
			;;

		*) echo "Invalid input"
		    ;;
	esac
}

ask
